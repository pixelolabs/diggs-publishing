<div class="inner-hero-section">
  {% assign mobile_image = blog.metafields.hero_banner.background_image_mobile | first %}
  {% assign image = blog.metafields.hero_banner.background_image_desktop | first %}
  <div class="image-wrapper">
    <picture>
      <source media="(max-width: 600px)" srcset="{{ mobile_image.cloudinary_src}}">
      <img src="{{ image.cloudinary_src}}" alt="{{blog.title}}">
    </picture>
  </div>
  <div class="container-1240">
    <div class="content">
      {% if blog.metafields.hero_banner.pre_title != blank %}
        <h6>{{ blog.metafields.hero_banner.pre_title }}</h6>
      {% endif %}
      {% if blog.metafields.hero_banner.title != blank %}
        <h1 class="small ">{{ blog.metafields.hero_banner.title }}</h1>
      {% else %}
        <h1 class="small ">{{ blog.title }}</h1>
      {% endif %}
      {% if section.settings.description != blank %}
        {{ section.settings.description }}
      {% endif %}
    </div>
  </div>
</div>

<div class="blog-section">
  {% paginate blog.articles by section.settings.blogItems %}
    <input
      type="hidden"
      class="js__perpage-item"
      value="{{section.settings.blogItems}}"
    >
    <input
      type="hidden"
      class="js__total-page"
      value="{{ paginate.pages }}"
    >
    <input
      type="hidden"
      class="js__current-page"
      value="{{ paginate.current_page }}"
    >
    <input
      type="hidden"
      class="js__items-count"
      value="{{blog.articles_count}}"
    >
    {% include 'blog_category' %}
    {% comment %} Featured Article {% endcomment %}

    {% if request.path contains '/our-farmers' or request.path contains 'our-farmer' %}
      {% if section.settings.featured_article2 != blank %}
        {%- assign featuredArticle = articles[section.settings.featured_article2] -%}
        {% assign featuredArticleTitle = featuredArticle.title %}
        <div class="featured-blog">
          <div class="container-1340 flex-wrap">
            {%
              include 'article_Card' with articleRelated: featuredArticle,
              show_tags: true, show_time: false, show_description: true, is_featured: true, show_readMore: false;
            %}
          </div>
        </div>
      {% endif %}
    {% else %}
      {% if section.settings.show_featured_article %}
        {%- assign featuredArticle = articles[section.settings.featured_article] -%}
        {% assign featuredArticleTitle = featuredArticle.title %}
        {% if featuredArticle.title != blank %}
          <div class="featured-blog">
            <div class="container-1340 flex-wrap">
              {%
                include 'article_Card' with articleRelated: featuredArticle,
                show_tags: true, show_time: false, show_description: true, is_featured: true, show_readMore: false;
              %}
            </div>
          </div>
        {% endif %}
      {% endif %}
    {% endif %}
    {% comment %}
      <div class="blog-header-section flex">
        <h3>All Articles</h3>
        {% include 'blog_category' %}
      </div>
    {% endcomment %}
    {% assign posts = blog.articles | sort: 'published_at' | reverse %}
    {% if posts != blank %}
      <div class="blog_wrapper graphic-top-left">
        <div class="container-1300 p-t-80 ">
          <ul class="blog-list-view flex-wrap">
            {% for article in posts %}
              {% if section.settings.show_featured_article %}
                {% assign articleTitle = article.id %}

                {% if articleTitle == featuredArticleTitle %}
                {% else %}
                  <li>
                    {%
                      include 'article_Card' with articleRelated: article, isFeatured: false,
                      show_tags: true, show_time: false, show_description: false, show_readMore: true
                    %}
                  </li>
                {% endif %}
              {% endif %}
            {% endfor %}
          </ul>
        </div>
      </div>
    {% endif %}

    {% if blog.articles_count > section.settings.blogItems %}
      {% comment %} Pagination {% endcomment %}
      <div class="pagination-section flex-align-center">
        <div class="container-1340">
          <div class="pagination-wrapper">
            {% comment %} <p>Showing <span class="js__page-range">1 - 16</span> of {{ blog.articles_count }} items</p> {% endcomment %}
            {%- if paginate.pages > 1 -%}
              {% include 'pagination', paginate: paginate %}
            {%- endif -%}
          </div>
        </div>
      </div>
    {% endif %}
  {% endpaginate %}
</div>

{% schema %}
{
  "name": "Featured Article",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_featured_article",
      "label": "Show Featured Article",
      "default": true
    },
    {
      "type": "article",
      "id": "featured_article",
      "label": "Featured Article"
    },
    {
      "type": "article",
      "id": "featured_article2",
      "label": "Featured Article (tagged/farmers page)"
    },
    {
      "type": "number",
      "id": "blogItems",
      "label": "How Many Blogs Per Page",
      "default": 10
    }
  ]
}
{% endschema %}
