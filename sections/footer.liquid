<footer>
  <div class="main-footer">
    <div class="container-1306">
      <div class="top-section">
        <ul class="left-insta insta-list">
          {%- for block in section.blocks limit: 6 %}
            {% if block.settings.instaImage != blank %}
              <li>
                <a
                  href="{{ block.settings.InstaLink }}"
                  target="_blank"
                  class="image-section"
                  title="{{ block.settings.InstaLink }}"
                >
                  <picture>
                    <!-- Mobile sizes WebP -->
                    <source
                      type="image/webp"
                      media="(max-width: 767px)"
                      srcset="{{ block.settings.instaImage | image_url: width: 375, format: 'webp' }} 375w,
                              {{ block.settings.instaImage | image_url: width: 550, format: 'webp' }} 550w,
                              {{ block.settings.instaImage | image_url: width: 1262, format: 'webp' }} 1262w"
                      sizes="100vw">
  
                    <!-- Tablet sizes WebP -->
                    <source
                      type="image/webp"
                      media="(min-width: 768px) and (max-width: 1023px)"
                      srcset="{{ block.settings.instaImage | image_url: width: 768, format: 'webp' }} 768w,
                              {{ block.settings.instaImage | image_url: width: 1024, format: 'webp' }} 1024w,
                              {{ block.settings.instaImage | image_url: width: 1262, format: 'webp' }} 1262w"
                      sizes="100vw">
  
                    <!-- Desktop sizes WebP -->
                    <source
                      type="image/webp"
                      media="(min-width: 1024px)"
                      srcset="{{ block.settings.instaImage | image_url: width: 1000, format: 'webp' }} 1000w,
                              {{ block.settings.instaImage | image_url: width: 1262, format: 'webp' }} 1262w"
                      sizes="100vw">
  
                    <!-- Fallback for non-WebP support -->
                    <img src="{{ block.settings.instaImage | image_url: width: 1262 }}"
                         srcset="{{ block.settings.instaImage | image_url: width: 1262 }} 1262w"
                         sizes="100vw"
                         loading="lazy"
                         decoding="async"
                         alt="Instagram Image"
                         style="width: 100%; height: auto;">
                  </picture>
                </a>
              </li>
            {% endif %}
          {% endfor %}
        </ul>

        <!-- Middle section remains the same -->
        <div class="middle-section">
          {% if section.settings.sstext != blank %}
            <span>{{ section.settings.sstext }}</span>
          {% endif %}
          {% if section.settings.logo != blank %}
            <div class="footer-logo">
              {{ section.settings.logo | image_url: width: 200 | image_tag: loading: 'lazy', widths: '200x200' }}
            </div>
          {% endif %}
          <div class="social-icons">
            {% include 'social-icons' %}
          </div>
        </div>

        <ul class="rigt-insta insta-list">
          {% for block in section.blocks offset: 6 %}
            {% if block.settings.instaImage != blank %}
              <li>
                <a
                  href="{{ block.settings.InstaLink }}"
                  target="_blank"
                  class="image-section"
                  title="{{ block.settings.InstaLink }}"
                >
                  <picture>
                    <!-- Same optimization logic for right section images -->
                    <source type="image/webp"
                            media="(max-width: 767px)"
                            srcset="{{ block.settings.instaImage | image_url: width: 375, format: 'webp' }} 375w,
                                    {{ block.settings.instaImage | image_url: width: 550, format: 'webp' }} 550w,
                                    {{ block.settings.instaImage | image_url: width: 1262, format: 'webp' }} 1262w"
                            sizes="100vw">
                    <source type="image/webp"
                            media="(min-width: 768px) and (max-width: 1023px)"
                            srcset="{{ block.settings.instaImage | image_url: width: 768, format: 'webp' }} 768w,
                                    {{ block.settings.instaImage | image_url: width: 1024, format: 'webp' }} 1024w,
                                    {{ block.settings.instaImage | image_url: width: 1262, format: 'webp' }} 1262w"
                            sizes="100vw">
                    <source type="image/webp"
                            media="(min-width: 1024px)"
                            srcset="{{ block.settings.instaImage | image_url: width: 1000, format: 'webp' }} 1000w,
                                    {{ block.settings.instaImage | image_url: width: 1262, format: 'webp' }} 1262w"
                            sizes="100vw">
                    <img src="{{ block.settings.instaImage | image_url: width: 1262 }}"
                         srcset="{{ block.settings.instaImage | image_url: width: 1262 }} 1262w"
                         sizes="100vw"
                         loading="lazy"
                         decoding="async"
                         alt="Instagram Image"
                         style="width: 100%; height: auto;">
                  </picture>
                </a>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
      <div class="footer-cartoon">
        <img src="{{ "Footer-cartoon.jpg" |asset_url}}" alt="cartoon-figures">
      </div>
      
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Footer",
  "settings": [
    {
      "type": "header",
      "content": "Footer Info"
    },
    {
      "type": "text",
      "id": "sstext",
      "label": "Social Link Heading"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "text",
      "id": "newsTitle",
      "label": "Newsletter Title",
      "default": "Newsletter"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "link_list",
      "id": "footerMenu",
      "label": "Footer Menu"
    },
    {
      "type": "link_list",
      "id": "legalMenu",
      "label": "Legal Menu"
    },
    {
      "type": "text",
      "id": "creditText",
      "label": "Credit Text"
    },
    {
      "type": "url",
      "id": "credit",
      "label": "Credit Link"
    }
  ],

  "blocks": [
    {
      "type": "insta",
      "name": "Instagram Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "instaImage",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "InstaLink",
          "label": "Link"
        }
      ]
    }
  ]
}
{% endschema %}
