{% if section.settings.title != blank
  or section.settings.description != blank
  or section.settings.image1 != blank
  or section.settings.image2 != blank
%}
  <div class="content-banner">
    <div class="box">
      {% if section.settings.image1 != blank %}
        <div class="left-image">
          {% assign mobile_image1 = section.settings.image1 %}
          {% assign tablet_image1 = section.settings.image1 %}
          {% assign desktop_image1 = section.settings.image1 %}
          {% assign mobile_width = 600 %}
          {% assign tablet_width = 800 %}
          {% assign desktop_width = 1000 %}

          {% if forloop.first %}
            {{
              mobile_image1
              | image_url: width: mobile_width, format: 'webp'
              | preload_tag: as: 'image', media: '(max-width: 767px)'
            }}
            {{
              tablet_image1
              | image_url: width: tablet_width, format: 'webp'
              | preload_tag: as: 'image', media: '(min-width: 768px) and (max-width: 1023px)'
            }}
            {{
              desktop_image1
              | image_url: width: desktop_width, format: 'webp'
              | preload_tag: as: 'image', media: '(min-width: 1024px)'
            }}
          {% endif %}

          <picture>
            <!-- Mobile sizes WebP -->
            <source
              type="image/webp"
              media="(max-width: 767px)"
              srcset="
                {{ mobile_image1 | image_url: width: 375, format: 'webp' }} 375w,
                {{ mobile_image1 | image_url: width: mobile_width, format: 'webp' }} {{ mobile_width }}w
              "
              sizes="100vw"
            >

            <!-- Tablet sizes WebP -->
            <source
              type="image/webp"
              media="(min-width: 768px) and (max-width: 1023px)"
              srcset="
                {{ tablet_image1 | image_url: width: 768, format: 'webp' }} 768w,
                {{ tablet_image1 | image_url: width: tablet_width, format: 'webp' }} {{ tablet_width }}w
              "
              sizes="100vw"
            >

            <!-- Desktop sizes WebP -->
            <source
              type="image/webp"
              media="(min-width: 1024px)"
              srcset="
                {{ desktop_image1 | image_url: width: 1000, format: 'webp' }} 1000w,
                {{ desktop_image1 | image_url: width: desktop_width, format: 'webp' }} {{ desktop_width }}w
              "
              sizes="100vw"
            >

            <!-- Fallback for non-WebP support -->
            <img
              src="{{ mobile_image1 | image_url: width: mobile_width }}"
              srcset="
                {{ mobile_image1 | image_url: width: mobile_width }} {{ mobile_width }}w,
                {{ tablet_image1 | image_url: width: tablet_width }} {{ tablet_width }}w,
                {{ desktop_image1 | image_url: width: desktop_width }} {{ desktop_width }}w
              "
              sizes="(max-width: 767px) 100vw, (max-width: 1023px) 100vw, 100vw"
              width="{{ mobile_width }}"
              height="{{ mobile_width | divided_by: mobile_image1.aspect_ratio | round }}"
              loading="lazy"
              decoding="async"

              style="width: 100%;  display: block;"
            >
          </picture>
        </div>
      {% endif %}

      {% if section.settings.title != blank %}
        <div class="content">
          <h2 class="medium">{{ section.settings.title }}</h2>
          {% if section.settings.description != blank %}
            <div class="medium">{{ section.settings.description }}</div>
          {% endif %}
        </div>
      {% endif %}

      {% if section.settings.image2 != blank %}
        <div class="right-image">
          {% assign mobile_image2 = section.settings.image2 %}
          {% assign tablet_image2 = section.settings.image2 %}
          {% assign desktop_image2 = section.settings.image2 %}
          {% assign mobile_width = 600 %}
          {% assign tablet_width = 800 %}
          {% assign desktop_width = 1000 %}

          {% if forloop.first %}
            {{
              mobile_image2
              | image_url: width: mobile_width, format: 'webp'
              | preload_tag: as: 'image', media: '(max-width: 767px)'
            }}
            {{
              tablet_image2
              | image_url: width: tablet_width, format: 'webp'
              | preload_tag: as: 'image', media: '(min-width: 768px) and (max-width: 1023px)'
            }}
            {{
              desktop_image2
              | image_url: width: desktop_width, format: 'webp'
              | preload_tag: as: 'image', media: '(min-width: 1024px)'
            }}
          {% endif %}

          <picture>
            <!-- Mobile sizes WebP -->
            <source
              type="image/webp"
              media="(max-width: 767px)"
              srcset="
                {{ mobile_image2 | image_url: width: 375, format: 'webp' }} 375w,
                {{ mobile_image2 | image_url: width: mobile_width, format: 'webp' }} {{ mobile_width }}w
              "
              sizes="100vw"
            >

            <!-- Tablet sizes WebP -->
            <source
              type="image/webp"
              media="(min-width: 768px) and (max-width: 1023px)"
              srcset="
                {{ tablet_image2 | image_url: width: 768, format: 'webp' }} 768w,
                {{ tablet_image2 | image_url: width: tablet_width, format: 'webp' }} {{ tablet_width }}w
              "
              sizes="100vw"
            >

            <!-- Desktop sizes WebP -->
            <source
              type="image/webp"
              media="(min-width: 1024px)"
              srcset="
                {{ desktop_image2 | image_url: width: 1000, format: 'webp' }} 1000w,
                {{ desktop_image2 | image_url: width: desktop_width, format: 'webp' }} {{ desktop_width }}w
              "
              sizes="100vw"
            >

            <!-- Fallback for non-WebP support -->
            <img
              src="{{ mobile_image2 | image_url: width: mobile_width }}"
              srcset="
                {{ mobile_image2 | image_url: width: mobile_width }} {{ mobile_width }}w,
                {{ tablet_image2 | image_url: width: tablet_width }} {{ tablet_width }}w,
                {{ desktop_image2 | image_url: width: desktop_width }} {{ desktop_width }}w
              "
              sizes="(max-width: 767px) 100vw, (max-width: 1023px) 100vw, 100vw"
              width="{{ mobile_width }}"
              height="{{ mobile_width | divided_by: mobile_image2.aspect_ratio | round }}"
              loading="lazy"
              decoding="async"
              alt="{{ section.settings.title | escape }}"
              style="width: 100%; height: auto; display: block;"
            >
          </picture>
        </div>
      {% endif %}
    </div>
  </div>
{% endif %}

{% schema %}
{
  "name": "Content Banner",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "image_picker",
      "id": "image1",
      "label": "Child Image First",
      "info": "600 x 600px Recommended"
    },
    {
      "type": "image_picker",
      "id": "image2",
      "label": "Child Image Second",
      "info": "600 x 600px Recommended"
    }
  ],
  "presets": [
    {
      "name": "Content Banner"
    }
  ]
}
{% endschema %}
