<!doctype html>
  <html class="no-js" lang="{{ request.locale.iso_code }}">
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
      <meta name="description" content="Diggs publishing">
      <link rel="canonical" href="{{ canonical_url }}">
  
      <!-- Content Security Policy -->
      <meta http-equiv="Content-Security-Policy" content="
        default-src 'self' https:;
        script-src 'self' https: 'unsafe-inline' 'unsafe-eval' https://tools.luckyorange.com https://cdn.shopify.com;
        style-src 'self' 'unsafe-inline' https: https://fonts.googleapis.com;
        img-src 'self' https: data:;
        font-src 'self' https://fonts.gstatic.com https://cdn.shopify.com;
        connect-src 'self' https://tools.luckyorange.com https://cdn.shopify.com;
        object-src 'none';
        frame-ancestors 'none';
        form-action 'self';
        base-uri 'self';
        report-uri /csp-report-endpoint;
      ">
  
      {% include 'head' %}
      {% include 'sm-og-data' %}
      {% include 'scripts_head' %}
  
      {% render 'boost-sd-fallback' %}
      {{ content_for_header }}
  
      <!-- Lazy load external script -->
      <script async defer src="https://tools.luckyorange.com/core/lo.js?site-id=8894106a"></script>
    </head>
  
    <body class="template-{{ request.page_type | handle }} transparent-header">
      <script>
        // Redirect optimization
        if (/collections$/.test(window.location.href)) {
          var url = `${window.location.href}/all`;
          window.location.href = url;
        }
  
        // Remove 'no-js' class after JS is loaded
        document.documentElement.classList.remove('no-js');
      </script>
  
      {% section 'announcement' %}
      {% section 'header' %}
      
      <div class="page-container drawer-page-content" id="PageContainer">
        <main class="main-content js-focus-hidden js__main-content" id="MainContent" role="main" tabindex="-1">
          {{ content_for_layout }}
        </main>
        {% section 'footer' %}
      </div>
  
      {% include 'scripts_footer' %}
  
      {% include 'swym-custom' %}
  
      <script>
        // Optimize AOS initialization
        AOS.init({ startEvent: 'DOMContentLoaded' });
        document.addEventListener('DOMContentLoaded', function () {
          var cloneDOMContentLoaded = new Event('cloneDOMContentLoaded');
          document.dispatchEvent(cloneDOMContentLoaded);
        });
      </script>
    </body>
  </html>
  